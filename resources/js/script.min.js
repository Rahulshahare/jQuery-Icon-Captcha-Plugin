/**
 * Icon Captcha Plugin: v2.0.2
 * Copyright © 2017, Fabian Wennink (https://www.fabianwennink.nl)
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
!function(a){a.fn.extend({iconCaptcha:function(c){var t={captchaTheme:"",captchaFontFamily:"",captchaClickDelay:1e3,captchaHoverDetection:!0,showBoxShadow:!0,showCredits:!0,enableLoadingAnimation:!1,loadingAnimationDelay:2e3,captchaAjaxFile:"../php/captcha-request.php",captchaMessages:{header:"Select the image that does not belong in the row",correct:{top:"Great!",bottom:"You do not appear to be a robot."},incorrect:{top:"Oops!",bottom:"You've selected the wrong image."}}},e=a.extend(t,c);return this.each(function(c){function t(){var c="light";!e.captchaTheme||"dark"!==e.captchaTheme&&"light"!==e.captchaTheme||(d.addClass("captcha-theme-"+e.captchaTheme),c=e.captchaTheme.toLowerCase()),a.ajax({url:e.captchaAjaxFile,type:"post",data:{rT:1,tM:c},success:function(c){c&&($data=JSON.parse(c),r=new Date,p||(i(),d.trigger("init")),a(".captcha-image").each(function(c,t){a(this).css("background-image","url("+e.captchaAjaxFile+"?hash="+$data[c]+")"),a(this).attr("icon-hash",$data[c])}))},error:function(a,c,t){console.log(c,t),h()}})}function i(){e.captchaFontFamily?d.css("font-family",e.captchaFontFamily):a("body").append('\x3c!-- Icon Captcha default font --\x3e<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">'),d.html("                        <div id='captcha-modal' >                            <div id='captcha-modal__header'>                                <span>"+(e.captchaMessages.header&&e.captchaMessages.header?e.captchaMessages.header:"Select the image that does not belong in the row")+"</span>                            </div>                            <div id='captcha-modal__icons'>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                                <div class='captcha-image'></div>                            </div>                            <div id='captcha-modal__credits' alt='Captcha provided by Fabian Wennink'>                                Captcha provided by <a href='https://www.fabianwennink.nl/projects/IconCaptcha/v2/' target='_blank' rel='follow'>Fabian Wennink</a> ©                            </div>                            <input type='hidden' name='captcha-hidden-field' required />                        </div>"),e.showBoxShadow&&d.addClass("captcha-boxshadow"),e.showCredits&&d.addClass("captcha-credits"),p=!0}function o(c){var t=c.attr("icon-hash");t&&(d.find("input").attr("value",t),a.ajax({url:e.captchaAjaxFile,type:"post",data:{pC:t,rT:2},success:function(a){"1"===a?s():h()},error:function(a,c,t){h()}}))}function s(){a("#captcha-modal__icons").empty(),d.addClass("captcha-success"),a("#captcha-modal__icons").html('<div id="captcha-modal__icons-title">'+(e.captchaMessages.correct&&e.captchaMessages.correct.top?e.captchaMessages.correct.top:"Great!")+'</div><div id="captcha-modal__icons-subtitle">'+(e.captchaMessages.correct&&e.captchaMessages.correct.bottom?e.captchaMessages.correct.bottom:"You do not appear to be a robot.")+"</div>"),d.trigger("success")}function h(){a("#captcha-modal__icons").empty(),d.addClass("captcha-error"),a("#captcha-modal__icons").html('<div id="captcha-modal__icons-title">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.top?e.captchaMessages.incorrect.top:"Oops!")+'</div><div id="captcha-modal__icons-subtitle">'+(e.captchaMessages.incorrect&&e.captchaMessages.incorrect.bottom?e.captchaMessages.incorrect.bottom:"You've selected the wrong image.")+"</div>"),d.trigger("error"),setTimeout(n,3e3)}function n(){d.removeClass("captcha-error"),d.find("input").attr("value",null),a("#captcha-modal__icons").html("                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                        <div class='captcha-image'></div>                    ").removeClass("captcha-opacity"),a("#captcha-modal__icons > .captcha-image").attr("icon-hash",null),t(),d.trigger("refreshed")}var d=a(this),p=!1,r=0,l=!1;t(),a(document).on("click","#captcha-modal__icons > .captcha-image",function(){if(!(new Date-r<=e.captchaClickDelay)&&(!e.captchaHoverDetection||l)){var c=a(this),t=a("#captcha-modal__icons");t.hasClass("captcha-opacity")||(d.trigger("selected"),!0===e.enableLoadingAnimation?(t.addClass("captcha-opacity"),t.prepend('<div class="captcha-loader"></div>'),setTimeout(function(){o(c)},e.loadingAnimationDelay)):o(c))}}).on({mouseenter:function(){l||(l=!0)},mouseleave:function(){l&&(l=!1)}},"#captcha-holder")})}})}(jQuery);