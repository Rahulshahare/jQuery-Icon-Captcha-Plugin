/**
 * Icon Captcha Plugin: v2.0.1
 * Copyright © 2017, Fabian Wennink (https://www.fabianwennink.nl)
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
!function(t){t.fn.extend({iconCaptcha:function(a){var c={captchaTheme:"",captchaFontFamily:"",captchaClickDelay:1e3,captchaHoverDetection:!0,showBoxShadow:!0,showCredits:!0,enableLoadingAnimation:!1,loadingAnimationDelay:2e3,captchaAjaxFile:"../php/captcha-request.php"},i=t.extend(c,a);return this.each(function(a){function c(){var a="light";!i.captchaTheme||"dark"!==i.captchaTheme&&"light"!==i.captchaTheme||(s.addClass("captcha-theme-"+i.captchaTheme),a=i.captchaTheme.toLowerCase()),t.ajax({url:i.captchaAjaxFile,type:"post",data:{rT:1,tM:a},success:function(a){a&&($data=JSON.parse(a),l=new Date,p||(e(),s.trigger("init")),t(".captcha-image").each(function(a,c){t(this).css("background-image","url("+i.captchaAjaxFile+"?hash="+$data[a]+")"),t(this).attr("icon-hash",$data[a])}))},error:function(t,a,c){console.log(a,c),d()}})}function e(){i.captchaFontFamily?s.css("font-family",i.captchaFontFamily):t("body").append('\x3c!-- Icon Captcha default font --\x3e<link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">'),s.html("\t\t\t\t\t\t<div id='captcha-modal' >\t\t\t\t\t\t\t<div id='captcha-modal__header'>\t\t\t\t\t\t\t\t<span>Select the image that does not belong in the row</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div id='captcha-modal__icons'>\t\t\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div id='captcha-modal__credits' alt='Captcha provided by Fabian Wennink'>\t\t\t\t\t\t\t\tCaptcha provided by <a href='https://www.fabianwennink.nl/projects/IconCaptcha/v2/' target='_blank' rel='follow'>Fabian Wennink</a> ©\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<input type='hidden' name='captcha-hidden-field' required />\t\t\t\t\t\t</div>"),i.showBoxShadow&&s.addClass("captcha-boxshadow"),i.showCredits&&s.addClass("captcha-credits"),p=!0}function o(a){var c=a.attr("icon-hash");c&&(s.find("input").attr("value",c),t.ajax({url:i.captchaAjaxFile,type:"post",data:{pC:c,rT:2},success:function(t){"1"===t?n():d()},error:function(t,a,c){d()}}))}function n(){t("#captcha-modal__icons").empty(),s.addClass("captcha-success"),t("#captcha-modal__icons").html('<div id="captcha-modal__icons-title">Great!</div><div id="captcha-modal__icons-subtitle">You do not appear to be a robot.</div>'),s.trigger("success")}function d(){t("#captcha-modal__icons").empty(),s.addClass("captcha-error"),t("#captcha-modal__icons").html('<div id="captcha-modal__icons-title">Oops!</div><div id="captcha-modal__icons-subtitle">You\'ve selected the wrong image.</div>'),s.trigger("error"),setTimeout(h,3e3)}function h(){s.removeClass("captcha-error"),s.find("input").attr("value",null),t("#captcha-modal__icons").html("\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t\t<div class='captcha-image'></div>\t\t\t\t\t").removeClass("captcha-opacity"),t("#captcha-modal__icons > .captcha-image").attr("icon-hash",null),c(),s.trigger("refreshed")}var s=t(this),p=!1,l=0,r=!1;c(),t(document).on("click","#captcha-modal__icons > .captcha-image",function(){if(!(new Date-l<=i.captchaClickDelay)&&(!i.captchaHoverDetection||r)){var a=t(this),c=t("#captcha-modal__icons");c.hasClass("captcha-opacity")||(s.trigger("selected"),!0===i.enableLoadingAnimation?(c.addClass("captcha-opacity"),c.prepend('<div class="captcha-loader"></div>'),setTimeout(function(){o(a)},i.loadingAnimationDelay)):o(a))}}).on({mouseenter:function(){r||(r=!0)},mouseleave:function(){r&&(r=!1)}},"#captcha-holder")})}})}(jQuery);